-- VHDL Entity ece411.mp2_CPU.symbol
--
-- Created:
--          by - goldste6.ews (evrt-252-17.ews.illinois.edu)
--          at - 19:27:54 02/22/12
--
-- Generated by Mentor Graphics' HDL Designer(TM) 2005.3 (Build 75)
--
LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.NUMERIC_STD.all;

LIBRARY ece411;
USE ece411.LC3b_types.all;

ENTITY mp2_CPU IS
   PORT( 
      RESET_L : IN     std_logic;
      START_H : IN     std_logic
   );

-- Declarations

END mp2_CPU ;

--
-- VHDL Architecture ece411.mp2_CPU.struct
--
-- Created:
--          by - goldste6.ews (evrt-252-17.ews.illinois.edu)
--          at - 19:27:54 02/22/12
--
-- Generated by Mentor Graphics' HDL Designer(TM) 2005.3 (Build 75)
--
LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.NUMERIC_STD.all;

LIBRARY ece411;
USE ece411.LC3b_types.all;

LIBRARY ece411;

ARCHITECTURE struct OF mp2_CPU IS

   -- Architecture declarations

   -- Internal signal declarations
   SIGNAL ADDRESS      : LC3b_word;
   SIGNAL ALUMuxSel    : LC3b_4MUX_Sel;
   SIGNAL ALUSubMuxSel : std_logic;
   SIGNAL ALUop        : LC3b_aluop;
   SIGNAL AddrParity   : std_logic;
   SIGNAL CLK          : std_logic;
   SIGNAL CheckN       : std_logic;
   SIGNAL CheckP       : std_logic;
   SIGNAL CheckZ       : std_logic;
   SIGNAL DATAIN       : LC3b_word;
   SIGNAL DATAOUT      : LC3b_word;
   SIGNAL DestSel      : std_logic;
   SIGNAL LoadIR       : std_logic;
   SIGNAL LoadMAR      : std_logic;
   SIGNAL LoadMDR      : std_logic;
   SIGNAL LoadNZP      : std_logic;
   SIGNAL LoadPC       : std_logic;
   SIGNAL MARMuxSel    : LC3b_4MUX_Sel;
   SIGNAL MDRMuxSel    : std_logic;
   SIGNAL MREAD_L      : std_logic;
   SIGNAL MRESP_H      : std_logic;
   SIGNAL MWRITEH_L    : std_logic;
   SIGNAL MWRITEL_L    : std_logic;
   SIGNAL Opcode       : LC3b_opcode;
   SIGNAL PCMuxSel     : LC3b_4MUX_SEL;
   SIGNAL RFMuxSel     : LC3b_8MUX_SEL;
   SIGNAL RegWrite     : std_logic;
   SIGNAL ShiftSel     : std_logic;
   SIGNAL StoreSR      : std_logic;
   SIGNAL bit5         : std_logic;
   SIGNAL direction    : std_logic;
   SIGNAL n            : std_logic;
   SIGNAL p            : std_logic;
   SIGNAL z            : std_logic;


   -- Component Declarations
   COMPONENT CLKgen
   PORT (
      clk : INOUT  std_logic  := '0'
   );
   END COMPONENT;
   COMPONENT CacheCheck
   PORT (
      ADDRESS       : IN     LC3b_word;
      CACHE_DATAIN  : IN     LC3b_word;
      CACHE_MRESP_H : IN     std_logic;
      CLK           : IN     std_logic;
      DATAOUT       : IN     LC3b_word;
      MREAD_L       : IN     std_logic;
      MWRITEH_L     : IN     std_logic;
      MWRITEL_L     : IN     std_logic;
      RESET_L       : IN     std_logic
   );
   END COMPONENT;
   COMPONENT Control
   PORT (
      AddrParity   : IN     std_logic ;
      CLK          : IN     std_logic ;
      CheckN       : IN     std_logic ;
      CheckP       : IN     std_logic ;
      CheckZ       : IN     std_logic ;
      MRESP_H      : IN     std_logic ;
      Opcode       : IN     LC3b_opcode ;
      RESET_L      : IN     std_logic ;
      START_H      : IN     std_logic ;
      bit5         : IN     std_logic ;
      direction    : IN     std_logic ;
      n            : IN     std_logic ;
      p            : IN     std_logic ;
      z            : IN     std_logic ;
      ALUMuxSel    : OUT    LC3b_4MUX_Sel ;
      ALUSubMuxSel : OUT    std_logic ;
      ALUop        : OUT    LC3b_aluop ;
      DestSel      : OUT    std_logic ;
      LoadIR       : OUT    std_logic ;
      LoadMAR      : OUT    std_logic ;
      LoadMDR      : OUT    std_logic ;
      LoadNZP      : OUT    std_logic ;
      LoadPC       : OUT    std_logic ;
      MARMuxSel    : OUT    LC3b_4MUX_Sel ;
      MDRMuxSel    : OUT    std_logic ;
      MREAD_L      : OUT    std_logic ;
      MWRITEH_L    : OUT    std_logic ;
      MWRITEL_L    : OUT    std_logic ;
      PCMuxSel     : OUT    LC3b_4MUX_SEL ;
      RFMuxSel     : OUT    LC3b_8MUX_SEL ;
      RegWrite     : OUT    std_logic ;
      ShiftSel     : OUT    std_logic ;
      StoreSR      : OUT    std_logic 
   );
   END COMPONENT;
   COMPONENT DRAMAuditor
   PORT (
      ADDRESS   : IN     LC3b_word;
      MREAD_L   : IN     std_logic;
      MWRITEH_L : IN     std_logic;
      MWRITEL_L : IN     std_logic;
      RESET_L   : IN     std_logic
   );
   END COMPONENT;
   COMPONENT Datapath
   PORT (
      ALUMuxSel    : IN     LC3b_4MUX_Sel ;
      ALUSubMuxSel : IN     std_logic ;
      ALUop        : IN     LC3b_aluop ;
      CLK          : IN     std_logic ;
      DATAIN       : IN     LC3b_word ;
      DestSel      : IN     std_logic ;
      LoadIR       : IN     std_logic ;
      LoadMAR      : IN     std_logic ;
      LoadMDR      : IN     std_logic ;
      LoadNZP      : IN     std_logic ;
      LoadPC       : IN     std_logic ;
      MARMuxSel    : IN     LC3b_4MUX_Sel ;
      MDRMuxSel    : IN     std_logic ;
      PCMuxSel     : IN     LC3b_4MUX_SEL ;
      RESET_L      : IN     std_logic ;
      RFMuxSel     : IN     LC3b_8MUX_SEL ;
      RegWrite     : IN     std_logic ;
      ShiftSel     : IN     std_logic ;
      StoreSR      : IN     std_logic ;
      AddrParity   : OUT    std_logic ;
      CheckN       : OUT    std_logic ;
      CheckP       : OUT    std_logic ;
      CheckZ       : OUT    std_logic ;
      DATAOUT      : OUT    LC3b_word ;
      Opcode       : OUT    LC3b_opcode ;
      bit5         : OUT    std_logic ;
      direction    : OUT    std_logic ;
      n            : OUT    std_logic ;
      p            : OUT    std_logic ;
      z            : OUT    std_logic ;
      ADDRESS      : BUFFER LC3b_word 
   );
   END COMPONENT;
   COMPONENT Memory
   PORT (
      ADDRESS   : IN     LC3b_word ;
      CLK       : IN     std_logic ;
      DATAOUT   : IN     LC3b_word ;
      MREAD_L   : IN     std_logic ;
      MWRITEH_L : IN     std_logic ;
      MWRITEL_L : IN     std_logic ;
      RESET_L   : IN     std_logic ;
      DATAIN    : OUT    LC3b_word ;
      MRESP_H   : OUT    std_logic 
   );
   END COMPONENT;

   -- Optional embedded configurations
   -- pragma synthesis_off
   FOR ALL : CLKgen USE ENTITY ece411.CLKgen;
   FOR ALL : CacheCheck USE ENTITY ece411.CacheCheck;
   FOR ALL : Control USE ENTITY ece411.Control;
   FOR ALL : DRAMAuditor USE ENTITY ece411.DRAMAuditor;
   FOR ALL : Datapath USE ENTITY ece411.Datapath;
   FOR ALL : Memory USE ENTITY ece411.Memory;
   -- pragma synthesis_on


BEGIN

   -- Instance port mappings.
   I0 : CLKgen
      PORT MAP (
         clk => CLK
      );
   I2 : CacheCheck
      PORT MAP (
         ADDRESS       => ADDRESS,
         CACHE_DATAIN  => DATAIN,
         CACHE_MRESP_H => MRESP_H,
         CLK           => CLK,
         DATAOUT       => DATAOUT,
         MREAD_L       => MREAD_L,
         MWRITEH_L     => MWRITEH_L,
         MWRITEL_L     => MWRITEL_L,
         RESET_L       => RESET_L
      );
   ControlUnit : Control
      PORT MAP (
         AddrParity   => AddrParity,
         CLK          => CLK,
         CheckN       => CheckN,
         CheckP       => CheckP,
         CheckZ       => CheckZ,
         MRESP_H      => MRESP_H,
         Opcode       => Opcode,
         RESET_L      => RESET_L,
         START_H      => START_H,
         bit5         => bit5,
         direction    => direction,
         n            => n,
         p            => p,
         z            => z,
         ALUMuxSel    => ALUMuxSel,
         ALUSubMuxSel => ALUSubMuxSel,
         ALUop        => ALUop,
         DestSel      => DestSel,
         LoadIR       => LoadIR,
         LoadMAR      => LoadMAR,
         LoadMDR      => LoadMDR,
         LoadNZP      => LoadNZP,
         LoadPC       => LoadPC,
         MARMuxSel    => MARMuxSel,
         MDRMuxSel    => MDRMuxSel,
         MREAD_L      => MREAD_L,
         MWRITEH_L    => MWRITEH_L,
         MWRITEL_L    => MWRITEL_L,
         PCMuxSel     => PCMuxSel,
         RFMuxSel     => RFMuxSel,
         RegWrite     => RegWrite,
         ShiftSel     => ShiftSel,
         StoreSR      => StoreSR
      );
   I1 : DRAMAuditor
      PORT MAP (
         ADDRESS   => ADDRESS,
         MREAD_L   => MREAD_L,
         MWRITEH_L => MWRITEH_L,
         MWRITEL_L => MWRITEL_L,
         RESET_L   => RESET_L
      );
   theDatapath : Datapath
      PORT MAP (
         ALUMuxSel    => ALUMuxSel,
         ALUSubMuxSel => ALUSubMuxSel,
         ALUop        => ALUop,
         CLK          => CLK,
         DATAIN       => DATAIN,
         DestSel      => DestSel,
         LoadIR       => LoadIR,
         LoadMAR      => LoadMAR,
         LoadMDR      => LoadMDR,
         LoadNZP      => LoadNZP,
         LoadPC       => LoadPC,
         MARMuxSel    => MARMuxSel,
         MDRMuxSel    => MDRMuxSel,
         PCMuxSel     => PCMuxSel,
         RESET_L      => RESET_L,
         RFMuxSel     => RFMuxSel,
         RegWrite     => RegWrite,
         ShiftSel     => ShiftSel,
         StoreSR      => StoreSR,
         AddrParity   => AddrParity,
         CheckN       => CheckN,
         CheckP       => CheckP,
         CheckZ       => CheckZ,
         DATAOUT      => DATAOUT,
         Opcode       => Opcode,
         bit5         => bit5,
         direction    => direction,
         n            => n,
         p            => p,
         z            => z,
         ADDRESS      => ADDRESS
      );
   DRAM : Memory
      PORT MAP (
         ADDRESS   => ADDRESS,
         CLK       => CLK,
         DATAOUT   => DATAOUT,
         MREAD_L   => MREAD_L,
         MWRITEH_L => MWRITEH_L,
         MWRITEL_L => MWRITEL_L,
         RESET_L   => RESET_L,
         DATAIN    => DATAIN,
         MRESP_H   => MRESP_H
      );

END struct;
